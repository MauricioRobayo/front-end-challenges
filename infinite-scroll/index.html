<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Infinite Scroll</title>
    <style>
      .container {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .container img {
        max-width: 320px;
        margin: 1rem 1rem;
      }
    </style>
  </head>
  <body>
    <div class="container"></div>
    <div id="img-loader">Loading images...</div>
    <script>
      const container = document.querySelector(".container");
      const imgLoader = document.querySelector("#img-loader");

      const observer = new IntersectionObserver(loadImgs);

      function randomInt() {
        return Math.floor(Math.random() * 100000);
      }

      function generateImgs(totalImgs) {
        const imgs = [];
        for (let i = 0; i < totalImgs; i++) {
          const img = document.createElement("img");
          img.src = `http://api.adorable.io/avatars/${randomInt()}`;
          imgs.push(img);
        }
        return imgs;
      }

      function appendImgs(container, totalImgs) {
        const imgs = generateImgs(totalImgs);
        container.append(...imgs);
      }

      function loadImgs(entries) {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            appendImgs(container, 10);
          }
        });
      }

      appendImgs(container, 5);
      observer.observe(imgLoader);
    </script>
  </body>
</html>
